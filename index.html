<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Respite &middot; A reactive and modular micro-framework for REST apps in Scala
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Respite
        </a>
      </h1>
      <p class="lead">A reactive and modular micro-framework for REST apps written in Scala. Made with &hearts; by <a href="https://twitter.com/matthewfellows" target="_blank">@matthewfellows</a>.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item active" href="/">Home</a>

      

      
      
        
          
            <a class="sidebar-nav-item" href="//deployment/">Deployment</a>
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/mefellows/respite">GitHub project</a>
      <span class="sidebar-nav-item">Currently v0.2.0</span>
    </nav>

    <p>&copy; 2014. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <h1>Respite - REST for micro-services</h1>

<p class="message">
  Version 0.2.0 Just released!
</p>

<p>Respite is a micro-framework designed for creating RESTful services in micro-services architectures and reactive web applications. It is fairly opinionated, however built upon the excellent <a href="http://www.scalatra.org/">Scalatra</a>, it is also extensible.</p>

<h2>Why use Respite?</h2>

<p>Respite is not a fully featured framework like <a href="https://www.playframework.com/">Play</a>, <a href="http://liftweb.net/">Lift</a>, <a href="http://projects.spring.io/spring-framework/">Spring MVC</a> etc. It is a micro-framework designed particularly well for:</p>

<ul>
<li>For use in a <a href="http://martinfowler.com/articles/microservices.html">micro-services</a> architecture</li>
<li>As a backing REST API in a Reactive JavaScript Application (Angular, React, etc.)</li>
</ul>

<h2>Getting Started</h2>

<p class="message">
  The recommended approach is using the Respite Generator, as it comes integrated with a scaffolding engine to continue .
</p>

<h3>Using the Respite Generator</h3>

<p>Follow these steps to get a basic Respite project up and running.</p>

<ol>
<li><a href="http://www.scala-sbt.org/release/tutorial/Setup.html">Install sbt</a>.</li>
<li><a href="https://github.com/n8han/giter8#installation">Install giter8</a>.</li>
<li>In a command console, <code>cd</code> to your development environment</li>
<li>Run <code>g8 mefellows/respite-sbt.g8</code></li>
<li>Fill in the prompted blanks. Default values are in the square brackets. Fill in the variables as you see fit, but only mess with the versions if you know what you&#39;re doing.</li>
<li><code>cd</code> to the newly created directory and do your <code>git init</code>, etc.</li>
<li>Launch <code>sbt</code> in this directory. Wait patiently as it downloads the internet the first time.</li>
<li>Execute <code>container:start</code> to launch the web application.</li>
<li>Execute <code>browse</code> to see a default HTML template display in your browser - this is nothing exciting.</li>
</ol>

<p>Once you&#39;re up and running, you can use the giter8 <a href="https://github.com/n8han/giter8#scaffolding-plugin">scaffolding</a> tool</p>

<h4>Scaffolding</h4>

<p>From within sbt run <code>g8Scaffold &lt;TAB&gt;</code> to see what can be auto-generated for you:</p>

<p><strong>Creating Models</strong></p>

<p><code>g8Scaffold model</code></p>

<p><strong>Creating Repositories</strong></p>

<p><code>g8Scaffold repository</code></p>

<p><strong>Creating Controllers</strong></p>

<p><code>g8Scaffold controller</code></p>

<h3>Existing Scalatra Application</h3>

<p>In your <code>build.{sbt, scala}</code>:</p>
<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;au.com.onegeek&quot;</span> <span class="o">%%</span> <span class="s">&quot;respite-core&quot;</span> <span class="o">%</span> <span class="s">&quot;0.2.0&quot;</span>
</code></pre></div>
<h4>Create a Model</h4>
<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">case</span> <span class="k">class</span> <span class="nc">User</span><span class="o">(</span><span class="n">id</span><span class="k">:</span> <span class="kt">BSONObjectID</span> <span class="o">=</span> <span class="nc">BSONObjectID</span><span class="o">.</span><span class="n">generate</span><span class="o">,</span> <span class="n">username</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">firstName</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Model</span><span class="o">[</span><span class="kt">BSONObjectID</span><span class="o">]</span>

<span class="k">object</span> <span class="nc">User</span> <span class="o">{</span>
  <span class="k">import</span> <span class="nn">au.com.onegeek.respite.models.ModelJsonExtensions._</span>
  <span class="k">implicit</span> <span class="k">val</span> <span class="n">format</span> <span class="k">=</span> <span class="n">modelFormat</span> <span class="o">{</span> <span class="nc">Json</span><span class="o">.</span><span class="n">format</span><span class="o">[</span><span class="kt">User</span><span class="o">]</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<h4>Create a Repository</h4>

<p>Here is a Repository definition that saves data to a Mongo Database (using the <a href="http://reactivemongo.org/">Reactive Mongo</a> library), creating an Index on the <code>username</code> field.</p>
<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">class</span> <span class="nc">UserRepository</span><span class="o">(</span><span class="k">implicit</span> <span class="n">mc</span><span class="k">:</span> <span class="kt">MongoConnector</span><span class="o">)</span>
  <span class="k">extends</span> <span class="nc">ReactiveRepository</span><span class="o">[</span><span class="kt">User</span>, <span class="kt">BSONObjectID</span><span class="o">](</span><span class="s">&quot;users&quot;</span><span class="o">,</span> <span class="n">mc</span><span class="o">.</span><span class="n">db</span><span class="o">,</span> <span class="n">modelFormatForMongo</span> <span class="o">{</span><span class="nc">Json</span><span class="o">.</span><span class="n">format</span><span class="o">[</span><span class="kt">User</span><span class="o">]},</span> <span class="nc">ReactiveMongoFormats</span><span class="o">.</span><span class="n">objectIdFormats</span><span class="o">)</span> <span class="o">{</span>

  <span class="k">override</span> <span class="k">def</span> <span class="n">ensureIndexes</span><span class="o">()</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">collection</span><span class="o">.</span><span class="n">indexesManager</span><span class="o">.</span><span class="n">ensure</span><span class="o">(</span><span class="nc">Index</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="s">&quot;username&quot;</span> <span class="o">-&gt;</span> <span class="nc">IndexType</span><span class="o">.</span><span class="nc">Ascending</span><span class="o">),</span> <span class="n">name</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="s">&quot;keyFieldUniqueIdx&quot;</span><span class="o">),</span> <span class="n">unique</span> <span class="k">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">sparse</span> <span class="k">=</span> <span class="kc">true</span><span class="o">))</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<h4>Add RestController instance to your Scalatra Bootstrap file</h4>

<p>Create an instance of RestController for a <code>User</code> in table &quot;users&quot; on path &quot;/users/*&quot;:</p>
<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">class</span> <span class="nc">ScalatraBootstrap</span> <span class="k">extends</span> <span class="nc">LifeCycle</span> <span class="o">{</span>
  <span class="k">protected</span> <span class="k">implicit</span> <span class="k">def</span> <span class="n">executor</span><span class="k">:</span> <span class="kt">ExecutionContext</span> <span class="o">=</span> <span class="nc">ExecutionContext</span><span class="o">.</span><span class="n">global</span>

  <span class="k">override</span> <span class="k">def</span> <span class="n">init</span><span class="o">(</span><span class="n">context</span><span class="k">:</span> <span class="kt">ServletContext</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">// Import implicit definitions into Scope</span>
    <span class="k">implicit</span> <span class="k">val</span> <span class="n">bindingModule</span> <span class="k">=</span> <span class="nc">ProductionConfigurationModule</span>  <span class="c1">// DI Configuration object</span>
    <span class="k">import</span> <span class="nn">au.com.onegeek.respite.models.ModelJsonExtensions._</span>  <span class="c1">// JSON extensions</span>

    <span class="c1">// Add Controllers</span>
    <span class="n">addServlet</span><span class="o">(</span><span class="k">new</span> <span class="nc">RestController</span><span class="o">[</span><span class="kt">User</span>, <span class="kt">BSONObjectID</span><span class="o">](</span><span class="s">&quot;users&quot;</span><span class="o">,</span> <span class="nc">User</span><span class="o">.</span><span class="n">format</span><span class="o">,</span> <span class="k">new</span> <span class="nc">UserRepository</span><span class="o">),</span> <span class="s">&quot;/users/*&quot;</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
    </div>

  </body>
</html>
