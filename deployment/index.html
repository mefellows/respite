<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Deployment &middot; Respite
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Respite
        </a>
      </h1>
      <p class="lead">A reactive and modular micro-framework for REST apps written in Scala. Made with &hearts; by <a href="https://twitter.com/matthewfellows" target="_blank">@matthewfellows</a>.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>
      <a class="sidebar-nav-item" href="/routing/">Routing</a>
      <a class="sidebar-nav-item" href="/testing/">Testing</a>
      <a class="sidebar-nav-item" href="/deployment/">Deployment</a>
      <a class="sidebar-nav-item" href="/monitoring/">Monitoring</a>

      

      
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/mefellows/respite">GitHub</a>
      <span class="sidebar-nav-item">Currently v0.2.2</span>
    </nav>

    <p>&copy; 2014. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <h1>Deployment</h1>

<p class="message">
  Respite follows the <a href="http://12factor.net/">12 Factor</a> principles. If you're not familiar with these concepts, it's worth taking a short read-through first.
</p>

<p>Respite packages artifacts into an executable Jar, with the JRE as its only runtime dependency. To create one, from within your project dir run <code>sbt assembly</code> to package the application.</p>

<p>Then, from your environment, Heroku, etc., ensure the appropriate <a href="http://12factor.net/config">environment</a> variables are set and run the application with <code>java -jar &lt;path/to/output-file&gt;.jar</code></p>

<p><strong>Local Deployment Example</strong></p>

<p>Assuming there is a local database running on port 17017, the following exports the required database environment variables and runs a local embedded Jetty container on port 8080:</p>

<p><code>DATABASE_PORT=17017 DATABASE_HOST=127.0.0.1 DATABASE_NAME=test_foo PORT=8080 java -jar target/scala-2.10/example.jar</code></p>

<p>Running this command on the respite-examples sub-project shows the following output:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">11:37:57.752 [main] INFO  org.eclipse.jetty.server.Server - jetty-8.y.z-SNAPSHOT
11:37:57.878 [main] INFO  o.e.j.w.StandardDescriptorProcessor - NO JSP Support for /, did not find org.apache.jasper.servlet.JspServlet
11:37:57.916 [main] INFO  o.scalatra.servlet.ScalatraListener - The cycle class name from the config: ScalatraBootstrap
11:37:57.967 [main] INFO  o.scalatra.servlet.ScalatraListener - Initializing life cycle class: ScalatraBootstrap
11:37:58.211 [main] DEBUG a.c.o.r.e.models.SimpleAuthServlet - Instrumenting path /token/:key on au.com.onegeek.respite.examples.models.SimpleAuthServlet
11:37:58.212 [main] DEBUG a.c.o.r.e.models.SimpleAuthServlet - Instrumenting path /tokens/ on au.com.onegeek.respite.examples.models.SimpleAuthServlet
11:37:58.213 [main] DEBUG a.c.o.r.e.models.SimpleAuthServlet - Instrumenting path /token/? on au.com.onegeek.respite.examples.models.SimpleAuthServlet
[DEBUG] [09/20/2014 11:37:58.544] [main] [EventStream(akka://reactivemongo)] logger log1-Logging$DefaultLogger started
[DEBUG] [09/20/2014 11:37:58.545] [main] [EventStream(akka://reactivemongo)] Default Loggers started
[DEBUG] [09/20/2014 11:37:58.927] [main] [EventStream] StandardOutLogger started
[DEBUG] [09/20/2014 11:37:58.937] [main] [EventStream(akka://default)] logger log1-Logging$DefaultLogger started
[DEBUG] [09/20/2014 11:37:58.937] [main] [EventStream(akka://default)] Default Loggers started
[DEBUG] [09/20/2014 11:37:58.937] [main] [EventStream(akka://default)] logger log1-Logging$DefaultLogger started
[DEBUG] [09/20/2014 11:37:58.937] [main] [EventStream(akka://default)] Default Loggers started
11:37:58.940 [main] DEBUG a.c.o.r.e.models.UserController - Caching path / on class au.com.onegeek.respite.examples.models.UserController
11:37:58.942 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path / on au.com.onegeek.respite.examples.models.UserController
11:37:58.942 [main] DEBUG a.c.o.r.e.models.UserController - Caching path /:id on class au.com.onegeek.respite.examples.models.UserController
11:37:58.942 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path /:id on au.com.onegeek.respite.examples.models.UserController
11:37:58.943 [main] DEBUG a.c.o.r.e.models.UserController - Caching path / on class au.com.onegeek.respite.examples.models.UserController
11:37:58.944 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path / on au.com.onegeek.respite.examples.models.UserController
11:37:58.945 [main] DEBUG a.c.o.r.e.models.UserController - Caching path /:id on class au.com.onegeek.respite.examples.models.UserController
11:37:58.945 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path /:id on au.com.onegeek.respite.examples.models.UserController
11:37:58.946 [main] DEBUG a.c.o.r.e.models.UserController - Caching path /:id on class au.com.onegeek.respite.examples.models.UserController
11:37:58.946 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path /:id on au.com.onegeek.respite.examples.models.UserController
11:37:58.947 [main] DEBUG a.c.o.r.e.models.UserController - Caching path /:id on class au.com.onegeek.respite.examples.models.UserController
11:37:58.947 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path /:id on au.com.onegeek.respite.examples.models.UserController
11:37:58.947 [main] DEBUG a.c.o.r.e.models.UserController - Caching path /search/ on class au.com.onegeek.respite.examples.models.UserController
11:37:58.947 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path /search/ on au.com.onegeek.respite.examples.models.UserController
11:37:58.968 [main] DEBUG a.c.o.r.e.models.UserController - Caching path /cache/expire on class au.com.onegeek.respite.examples.models.UserController
11:37:58.968 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path /cache/expire on au.com.onegeek.respite.examples.models.UserController
11:37:58.968 [main] DEBUG a.c.o.r.e.models.UserController - Caching path /cache/expire/:key on class au.com.onegeek.respite.examples.models.UserController
11:37:58.969 [main] DEBUG a.c.o.r.e.models.UserController - Instrumenting path /cache/expire/:key on au.com.onegeek.respite.examples.models.UserController
[DEBUG] [09/20/2014 11:37:58.985] [main] [EventStream] StandardOutLogger started
[DEBUG] [09/20/2014 11:37:58.993] [main] [EventStream(akka://default)] logger log1-Logging$DefaultLogger started
[DEBUG] [09/20/2014 11:37:58.994] [main] [EventStream(akka://default)] Default Loggers started
[DEBUG] [09/20/2014 11:37:58.993] [main] [EventStream(akka://default)] logger log1-Logging$DefaultLogger started
[DEBUG] [09/20/2014 11:37:58.994] [main] [EventStream(akka://default)] Default Loggers started
11:37:59.003 [main] DEBUG a.c.o.r.c.support.MetricsController - Initialising MetricsController for mo-metrics!
11:37:59.188 [main] INFO  o.f.s.servlet.ServletTemplateEngine - Scalate template engine using working directory: /var/folders/kf/4sgp93ys2t3_9t3yyzr07c3r0000gn/T/scalate-4688608319125102195-workdir
11:37:59.209 [main] INFO  o.e.jetty.server.AbstractConnector - Started SelectChannelConnector@0.0.0.0:8001
</code></pre></div>
<h2>Deployment to Heroku</h2>

<p><p class="message">Heroku is a great PaaS that makes deploying and managing applications a breeze. But best of all - you can deploy Respite Apps on Heroku <strong>for free</strong>! The following section assumes you have an Account on Heroku and have the <a href="https://toolbelt.heroku.com/">toolbelt</a> installed.</p>

<p></a></p>

<p>Respite works on Heroku out-of-the-box and contains a pre-configured <a href="https://devcenter.heroku.com/articles/procfile">Procfile</a>.</p>

<p>The following creates a new Heroku App, configures a MongoDB instance and deploys a Respite project:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">heroku apps:create my-respite-application
heroku addons:remove heroku-postgresql:my-respite-application
heroku addons:add mongohq
heroku config:set &quot;DATABASE_URL=$(heroku config:get MONGOHQ_URL)&quot;
git push heroku master
</code></pre></div>
<p>You should see output like the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ git push heroku master
Initializing repository, done.
Counting objects: 60, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (44/44), done.
Writing objects: 100% (60/60), 10.86 KiB | 0 bytes/s, done.
Total 60 (delta 6), reused 0 (delta 0)

-----&gt; Scala app detected
-----&gt; Installing OpenJDK 1.7...done
-----&gt; Downloading SBT...done
-----&gt; Running: sbt compile stage
       Getting org.scala-sbt sbt 0.13.5 ...
       downloading http://repo.typesafe.com/typesafe/ivy-releases/org.scala-sbt/sbt/0.13.5/jars/sbt.jar ...
        [SUCCESSFUL ] org.scala-sbt#sbt;0.13.5!sbt.jar (61ms)
       downloading http://repo1.maven.org/maven2/org/scala-lang/scala-library/2.10.4/scala-library-2.10.4.jar ...

       ...
       ... Downloading the Internet, please wait...
       ...

       [info] Wrote start script for mainClass := Some(au.com.respite.JettyLauncher) to /tmp/scala_buildpack_build_dir/target/start
       [success] Total time: 1 s, completed Sep 23, 2014 4:09:26 AM
-----&gt; Discovering process types
       Procfile declares types -&gt; web

-----&gt; Compressing... done, 256.7MB
-----&gt; Launching... done, v6
       http://my-respite-application.herokuapp.com/ deployed to Heroku

To git@heroku.com:my-respite-application.git
 * [new branch]      master -&gt; master
</code></pre></div>
<p>You should now be able to access your application at <code>http://my-respite-application.herokuapp.com</code>!</p>

    </div>

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-1274481-23', 'auto');
      ga('send', 'pageview');

    </script>
    
  </body>

</html>
